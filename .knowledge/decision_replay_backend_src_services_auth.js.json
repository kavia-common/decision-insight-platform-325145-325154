{"is_source_file": true, "format": "JavaScript", "description": "This file implements authentication services for a web application, including user signup, login, and logout functionalities. It interacts with a database to manage user sessions, credentials, and audit logs.", "external_files": ["../db/query", "../errors/apiError", "../utils/crypto", "./audit"], "external_methods": ["dbQuery", "withTransaction", "ApiError", "hashPassword", "verifyPassword", "generateOpaqueToken", "hashToken", "writeAuditLog"], "published": ["signup", "login", "logout"], "classes": [], "methods": [{"name": "buildExpiresAt()", "description": "Calculates the expiration date for access tokens based on a configurable TTL.", "scope": "", "scopeKind": ""}, {"name": "getUserByEmail(email)", "description": "Fetches a user record from the database by email address.", "scope": "", "scopeKind": ""}, {"name": "login({ email, password, ip, userAgent, requestId })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logout({ accessToken, userId, ip, userAgent, requestId })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "signup({ email, username, displayName, password, ip, userAgent, requestId })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["dbQuery", "withTransaction", "hashPassword", "generateOpaqueToken", "hashToken", "writeAuditLog", "verifyPassword"], "search-terms": ["auth", "signup", "login", "logout", "session", "token", "user management", "password hashing", "audit logging"], "state": 2, "file_id": 20, "knowledge_revision": 65, "git_revision": "41505f54f63608c133aba6ba1bb06fb649cc1442", "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_TTL_MIN", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^const ACCESS_TOKEN_TTL_MIN = process.env.ACCESS_TOKEN_TTL_MIN$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildExpiresAt", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^function buildExpiresAt() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getUserByEmail", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^async function getUserByEmail(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^async function login({ email, password, ip, userAgent, requestId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ email, password, ip, userAgent, requestId })"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^async function logout({ accessToken, userId, ip, userAgent, requestId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ accessToken, userId, ip, userAgent, requestId })"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^async function signup({ email, username, displayName, password, ip, userAgent, requestId }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ email, username, displayName, password, ip, userAgent, requestId })"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325154/decision_replay_backend/src/services/auth.js", "pattern": "/^module.exports = { signup, login, logout };$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}], "hash": "f8b751c1a6e366b36485da92530d3fd2", "format-version": 4, "code-base-name": "decision_replay_backend", "filename": "decision_replay_backend/src/services/auth.js", "fields": [{"name": "module.exports = { signup, login, logout };", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"65": "41505f54f63608c133aba6ba1bb06fb649cc1442"}]}